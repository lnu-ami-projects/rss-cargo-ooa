# 1. Діаграми сутностей

Усі діаграми [тут](https://github.com/lnu-ami-projects/rss-cargo-ooa/blob/main/docs/docs/er_diagram/er-diagram.pdf).

## Нотація Пітера Чена

<p align="center">
	<img src="https://github.com/lnu-ami-projects/rss-cargo-ooa/blob/main/docs/docs/er_diagram/er2.jpg" alt="Нотація Пітера Чена"/>
</p>

## Нотація "Вороняча лапка"

<p align="center">
	<img src="https://github.com/lnu-ami-projects/rss-cargo-ooa/blob/main/docs/docs/er_diagram/er1.jpg" alt="Нотація "Вороняча лапка""/>
</p>

### Основні сутності:

1. **Users (Користувачі)**: Реєстр користувачів системи.
2. **Cargos (Контейнери)**: Групи RSS-стрічок за спільною тематикою.
3. **User_Feeds (Підписки користувачів)**: Список RSS-стрічок, на які підписаний користувач.
4. **Cargo_Feeds (Підписки контейнерів)**: Список RSS-стрічок, що входять до контейнера.
5. **User_Cargo (Зв’язок користувач-контейнер)**: Інформація про підписки користувачів на контейнери.

---

# 2. Опис Сутностей

### **Users (Користувачі)**

- **id** (PK, INTEGER, AUTO_INCREMENT): Унікальний ідентифікатор користувача.
- **username** (VARCHAR(100)): Логін або відображуване ім’я користувача.
- **email** (VARCHAR(255)): Електронна пошта користувача.
- **password** (VARCHAR(255)): Зашифрований пароль для автентифікації.

### **Cargos (Контейнери)**

- **id** (PK, INTEGER, AUTO_INCREMENT): Унікальний ідентифікатор контейнера.
- **name** (VARCHAR(255)): Назва контейнера.

### **User_Feeds (Підписки користувачів)**

- **id** (PK, INTEGER, AUTO_INCREMENT): Унікальний ідентифікатор підписки.
- **user_id** (FK, INTEGER): Зовнішній ключ, що посилається на `Users.id`.
- **rss_feed** (VARCHAR(500)): URL або ідентифікатор RSS-стрічки.

### **Cargo_Feeds (Підписки контейнерів)**

- **id** (PK, INTEGER, AUTO_INCREMENT): Унікальний ідентифікатор підписки.
- **cargo_id** (FK, INTEGER): Зовнішній ключ, що посилається на `Cargos.id`.
- **rss_feed** (VARCHAR(500)): URL або ідентифікатор RSS-стрічки.

### **User_Cargo (Зв’язок користувач-контейнер)**

- **id** (PK, INTEGER, AUTO_INCREMENT): Унікальний ідентифікатор зв’язку.
- **user_id** (FK, INTEGER): Зовнішній ключ, що посилається на `Users.id`.
- **cargo_id** (FK, INTEGER): Зовнішній ключ, що посилається на `Cargos.id`.

---

# 3. Класифікація даних по "Data Retention Policy"

### Опис політики зберігання даних

Політика зберігання визначає строки та правила для збереження та видалення даних відповідно до юридичних вимог, бізнес-значення та технічних рекомендацій.

### Таблиця класифікації даних

| Тип даних                                  | Період зберігання                                         | Юридичні вимоги                  | Бізнес-значення                                                    |
| ------------------------------------------ | --------------------------------------------------------- | -------------------------------- | ------------------------------------------------------------------ |
| **Персональні дані (Users)**               | Зберігаються до моменту видалення акаунту + 30 днів       | Відповідність GDPR               | Забезпечення доступу до системи та комунікації з користувачами.    |
| **Паролі**                                 | Постійне зберігання у зашифрованому вигляді               | Захист конфіденційної інформації | Забезпечення безпеки користувачів.                                 |
| **Контейнери (Cargos)**                    | Постійне зберігання або до видалення адміністратором      | Немає вимог                      | Групування RSS-стрічок, що мають бізнес-цінність для користувачів. |
| **Підписки RSS (User_Feeds, Cargo_Feeds)** | До відписки користувача/видалення контейнера + 15 днів    | Відповідність GDPR               | Забезпечення доступності та актуальності інформації.               |
| **Зв’язки (User_Cargo)**                   | До видалення акаунту користувача або контейнера + 15 днів | Відповідність GDPR               | Підтримання коректної структури системи.                           |
| **Логи подій/помилок**                     | 90 днів                                                   | Немає конфіденційної інформації  | Моніторинг та аудит роботи системи.                                |

---

### Рекомендації для впровадження політики зберігання

1. **Автоматизація видалення даних**:

   - Налаштувати автоматичне видалення застарілих даних через скрипти (наприклад, cron jobs).
   - Логи подій мають автоматично очищатися через визначений період.

2. **Захист даних**:

   - Шифрувати чутливі дані (наприклад, паролі) з використанням алгоритму bcrypt.
   - Захищати дані резервних копій від несанкціонованого доступу.

3. **Юридична відповідність**:

   - Інтегрувати функціонал для виконання запитів користувачів на видалення даних.
   - Регулярно перевіряти політику зберігання відповідно до локальних та міжнародних вимог (GDPR, CCPA).

4. **Аудит та моніторинг**:

   - Проводити регулярний аналіз логів на наявність помилок або проблем із безпекою.
   - Забезпечувати прозорість зберігання даних для користувачів через зрозумілі повідомлення.

5. **Прозорість для користувачів**:
   - Інформувати користувачів про строки зберігання даних та їхні права.
   - Надати інтерфейс для перегляду, зміни та видалення даних.
